generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["fullTextSearch"]
}

datasource db {
  provider  = "postgresql"
  url       = env("POSTGRES_PRISMA_URL")
  directUrl = env("POSTGRES_URL_NON_POOLING")
}

model Banner {
  fileId     String
  fileBase64 String
  createdAt  DateTime @default(now())
  uuid       String   @id @default(uuid())
}

model Travel {
  name            String
  route           String
  description     String
  duration        String
  sightseeingTime String
  drivingTime     String
  drivingDistance String
  included        String?       @default("")
  notIncluded     String?       @default("")
  reservation     String?       @default("")
  travelType      travelType
  time            Time          @default(hour)
  createdAt       DateTime      @default(now())
  travelImageId   String
  uuid            String        @id @default(uuid())
  pricesPerCar    PricingTier[]
  travelImage     TravelImage   @relation(fields: [travelImageId], references: [uuid])
  itinerary       Itinerary[]   @relation("ItineraryToTravel")
}

model Car {
  models         String[]
  included       String?
  carType        String
  uuid           String           @id @default(uuid())
  capacity       Int
  pictures       Picture[]
  prices         PricingTier[]
  transferOption TransferOption[]
}

model Picture {
  fileId     String
  fileBase64 String
  createdAt  DateTime @default(now())
  uuid       String   @id @default(uuid())
  carId      String
  car        Car      @relation(fields: [carId], references: [uuid])
}

model PricingTier {
  id       Int     @id @default(autoincrement())
  carId    String?
  travelId String?
  distance String
  price    Int
  car      Car?    @relation(fields: [carId], references: [uuid])
  travel   Travel? @relation(fields: [travelId], references: [uuid])
}

model Itinerary {
  route       String
  description String
  duration    String
  time        Time     @default(hour)
  uuid        String   @id @default(uuid())
  travel      Travel[] @relation("ItineraryToTravel")
}

model TravelImage {
  fileId     String
  fileBase64 String
  createdAt  DateTime @default(now())
  uuid       String   @id @default(uuid())
  travel     Travel[]
}

model Contact {
  map       String
  telegram  String
  whatsapp  String
  createdAt DateTime @default(now())
  uuid      String   @id @default(uuid())
}

model Gallery {
  fileId     String
  fileBase64 String
  createdAt  DateTime @default(now())
  uuid       String   @id @default(uuid())
}

model TravelBanner {
  fileId     String
  fileBase64 String
  createdAt  DateTime @default(now())
  uuid       String   @id @default(uuid())
}

model TransferOption {
  uuid           String        @id @default(uuid())
  price          Int
  carId          String?
  transferInfoId String?
  car            Car?          @relation(fields: [carId], references: [uuid])
  transferInfo   TransferInfo? @relation(fields: [transferInfoId], references: [uuid])
}

model TransferInfo {
  uuid            String           @id @default(uuid())
  transfer        String
  time            Time
  drivingTime     String
  drivingDistance String
  transferOptions TransferOption[]
}

enum travelType {
  SHARED
  PRIVATE
}

enum Time {
  min
  hour
  day
}
